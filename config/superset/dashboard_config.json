{
  "dashboard": {
    "title": "Campaign Performance Metrics",
    "slug": "campaign-performance",
    "description": "Real-time dashboard for tracking CTR, CVR, and revenue metrics",
    "refresh_frequency": 30,
    "default_time_range": "Last 7 days"
  },
  "datasets": [
    {
      "name": "campaign_metrics",
      "table": "campaign_metrics",
      "sql": "SELECT campaign_id, window_start, window_end, impressions, clicks, conversions, revenue, ctr_percent, cvr_percent, processed_at FROM campaign_metrics",
      "columns": [
        {"name": "campaign_id", "type": "STRING"},
        {"name": "window_start", "type": "TIMESTAMP"},
        {"name": "window_end", "type": "TIMESTAMP"},
        {"name": "impressions", "type": "BIGINT"},
        {"name": "clicks", "type": "BIGINT"},
        {"name": "conversions", "type": "BIGINT"},
        {"name": "revenue", "type": "DOUBLE"},
        {"name": "ctr_percent", "type": "DOUBLE"},
        {"name": "cvr_percent", "type": "DOUBLE"},
        {"name": "processed_at", "type": "TIMESTAMP"}
      ],
      "metrics": [
        {"name": "total_impressions", "expression": "SUM(impressions)"},
        {"name": "total_clicks", "expression": "SUM(clicks)"},
        {"name": "total_conversions", "expression": "SUM(conversions)"},
        {"name": "total_revenue", "expression": "SUM(revenue)"},
        {"name": "avg_ctr", "expression": "AVG(ctr_percent)"},
        {"name": "avg_cvr", "expression": "AVG(cvr_percent)"}
      ]
    },
    {
      "name": "campaign_events",
      "table": "campaign_events",
      "sql": "SELECT event_id, user_id, campaign_id, event_type, platform, timestamp, revenue, country, device_type, processed_at FROM campaign_events",
      "columns": [
        {"name": "event_id", "type": "STRING"},
        {"name": "user_id", "type": "STRING"},
        {"name": "campaign_id", "type": "STRING"},
        {"name": "event_type", "type": "STRING"},
        {"name": "platform", "type": "STRING"},
        {"name": "timestamp", "type": "TIMESTAMP"},
        {"name": "revenue", "type": "DOUBLE"},
        {"name": "country", "type": "STRING"},
        {"name": "device_type", "type": "STRING"},
        {"name": "processed_at", "type": "TIMESTAMP"}
      ],
      "metrics": [
        {"name": "event_count", "expression": "COUNT(*)"},
        {"name": "total_revenue", "expression": "SUM(revenue)"}
      ]
    }
  ],
  "charts": [
    {
      "name": "CTR Trend by Campaign",
      "type": "line",
      "dataset": "campaign_metrics",
      "config": {
        "x_axis": "window_start",
        "y_axis": "avg_ctr",
        "series": "campaign_id",
        "time_range": "Last 7 days",
        "description": "Click-through rate trends over time by campaign"
      }
    },
    {
      "name": "CVR Trend by Campaign", 
      "type": "line",
      "dataset": "campaign_metrics",
      "config": {
        "x_axis": "window_start",
        "y_axis": "avg_cvr",
        "series": "campaign_id",
        "time_range": "Last 7 days",
        "description": "Conversion rate trends over time by campaign"
      }
    },
    {
      "name": "Revenue by Campaign",
      "type": "bar",
      "dataset": "campaign_metrics", 
      "config": {
        "x_axis": "campaign_id",
        "y_axis": "total_revenue",
        "time_range": "Last 7 days",
        "order_desc": true,
        "description": "Total revenue generated by each campaign"
      }
    },
    {
      "name": "Campaign Performance Summary",
      "type": "table",
      "dataset": "campaign_metrics",
      "config": {
        "columns": ["campaign_id", "total_impressions", "total_clicks", "total_conversions", "total_revenue", "avg_ctr", "avg_cvr"],
        "time_range": "Last 7 days",
        "order_desc": true,
        "description": "Comprehensive performance metrics for all campaigns"
      }
    }
  ],
  "layout": {
    "grid": [
      {
        "chart": "CTR Trend by Campaign",
        "position": {"x": 0, "y": 0, "width": 6, "height": 8}
      },
      {
        "chart": "CVR Trend by Campaign", 
        "position": {"x": 6, "y": 0, "width": 6, "height": 8}
      },
      {
        "chart": "Revenue by Campaign",
        "position": {"x": 0, "y": 8, "width": 6, "height": 8}
      },
      {
        "chart": "Campaign Performance Summary",
        "position": {"x": 6, "y": 8, "width": 6, "height": 8}
      }
    ]
  },
  "filters": [
    {
      "name": "Time Range",
      "type": "time_range",
      "default": "Last 7 days"
    },
    {
      "name": "Campaign",
      "type": "campaign_filter",
      "column": "campaign_id",
      "default": "All"
    }
  ],
  "alerts": [
    {
      "name": "Low CTR Alert",
      "condition": "avg_ctr < 1.0",
      "message": "CTR is below 1% threshold"
    },
    {
      "name": "Low CVR Alert", 
      "condition": "avg_cvr < 2.0",
      "message": "CVR is below 2% threshold"
    }
  ]
} 